<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pro Task Manager</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="js/pi-sdk.js"></script>
</head>
<body>
  <header>
    <h1>Pro Task Manager</h1>
    <p>Login with Pi to access your tasks</p>
  </header>

  <main>
    <button id="loginBtn">Login with Pi</button>
    <div id="userInfo"></div>
    <section id="tasks">
      <!-- سيتم إضافة المهام هنا لاحقًا -->
    </section>
  </main>

  <footer>
    <p>© 2025 Pro Task Manager</p>
  </footer>

  <script>
    const userInfo = document.getElementById('userInfo');
    const loginBtn = document.getElementById('loginBtn');

    if (!window.Pi) {
      userInfo.innerText = "Pi SDK لم يتم تحميله!";
    } else {
      Pi.init({ version: "2.0" });

      loginBtn.addEventListener('click', async () => {
        try {
          const user = await Pi.authenticate(['username']);
          const username = user.username || user.user?.username;
          userInfo.innerText = `تم تسجيل الدخول: ${username}`;

          // بعد تسجيل الدخول يمكن عرض المهام أو أي محتوى
          const tasksSection = document.getElementById('tasks');
          tasksSection.innerHTML = `
            <h2>مرحبا ${username}</h2>
            <ul>
              <li>✅ إكمال مهمة اليوم</li>
              <li>✅ مراجعة المهام القادمة</li>
              <li>✅ تحديث حالة المشاريع</li>
            </ul>
          `;
        } catch (err) {
          console.error(err);
          userInfo.innerText = "حدث خطأ أثناء تسجيل الدخول: " + err.message;
        }
      });
    }
  </script>
</body>
</html>
